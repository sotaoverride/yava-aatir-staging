function showProductOnAddProduct(t){var e=new FormData;e.append("keyProduct",t),e.append("action","showProductOnAdd"),$.ajax({url:"products.php",dataType:"xml",cache:!1,contentType:!1,processData:!1,data:e,type:"post",success:function(t){var e=$(t).find("error").text();if(e.length>0)return void alert(e);$("#productsSample").find(".sample").size()>0&&$("#productsSample").html("");var a=$(t).find("products"),s="";a.find("product").each(function(){var t=$(this).find("images").text(),e=$(this).find("name").text(),a=$(this).find("unit").text(),i=$(this).find("description").text(),n=$(this).find("category").text(),o=$(this).find("price").text();s+='<div class="columns">',s+='<div class="tile-box">',s+='<img class="float-center" src="'+t+'">',s+="<h3>",s+=e,s+="<span>Unit: "+a+"</span>",s+="</h3>",s+="<p>"+i+"</p>",s+='<div class="price-box">',s+='<span class="category">',s+="<strong>Category:</strong>",s+=n,s+="</span>",s+='<span class="price">',s+="USD "+o,s+="</span>",s+="</div>",s+="</div>",s+="</div>"}),$("#productsSample").append(s)}})}function showProduct(){var t=$("#category").find(":selected").val(),e=$("#search-bar").val(),a=$("#price").val();$.post("catalogue.php",{action:"catalogue",category:t,searchName:e,price:a},function(t){var e=$(t).find("error").text(),a="";if(e.length>0)a=$(t).find("error").text();else{var s=$(t).find("products");s.length>0&&$(s).find("product").each(function(){var t=$(this).find("keyProduct").text(),e=$(this).find("name").text(),s=$(this).find("description").text(),i=$(this).find("image").text(),n=$(this).find("category").text(),o=parseFloat($(this).find("price").text()),r=$(this).find("units").text();a+='<div class="columns">',a+='<div class="tile-box">',a+='<img class="float-center" src="'+i+'" style="height: 105px;">',a+="<h3>"+e+"<span>Unit: "+r+"</span></h3>",a+="<p>"+s+"</p>",a+='<div class="price-box">',a+='<span class="category">',a+="<strong>Category:</strong>"+n,a+="</span>",a+='<span class="price">',a+="USD "+o,a+="</span>",a+="</div>",a+='<a onclick="addToCart('+t+')">',a+='<button type="button" class="button add" id="cartAdd_'+t+'">Add to Cart</button>',a+="</a>",a+="</div>",a+="</div>"})}$("#shoes").html(a)},"xml")}function settingProductEdit(){cart.length<1&&alert("Select product first"),$.post("add_to_cart.php",{action:"add_to_cart",productKeys:cart},function(t){var e=$(t).find("error").text();if(e.length>0)alert("You must chose some product");else{var a=$(t).find("products"),s="";a.length>0&&($(a).find("product").each(function(){var t=$(this).find("keyProduct").text(),e=$(this).find("name").text(),a=$(this).find("image").text(),i=parseInt($(this).find("price").text()),n=parseInt($(this).find("quantity").text()),o=i*n;s+="<tr>",s+='<td><input type="hidden" class="productKey" name="productKey" id="productKey_'+t+'" value="'+t+'"/><img src="'+a+'" style="height: 80px;" />'+e+"</td>",s+='<td><input class="amounts" type="text" name="price" id="price_'+t+'" value="'+i+'"></td>',s+='<td><input class="amounts" type="text" name="quantity" id="quantity_'+t+'" value="'+n+'"></td>',s+='<td>USD <span id="amount_'+t+'">'+o+"</span></td>",s+="</tr>"}),$("#detailsEdit").html(s),$("#selectProd").removeClass("active"),$("#enterDit").addClass("active"),$("#catalogueSelect").fadeOut(),$("#goToDetails").fadeOut(),$("#enterDetails").fadeIn(),$(".amounts").bind("keyup mouseup",function(){var t=this.id.split("_")[1],e=$("#price_"+t).val(),a=$("#quantity_"+t).val(),s=e*a;$("#amount_"+t).text(s)}))}},"xml")}function showProductDeal(t){$.post("deals.php",{action:"show_deals",keyProduct:t},function(t){var e=$(t).find("error").text();if(e.length>0)alert("You must chose some product.");else{var a=$(t).find("productInfo"),s="";if(a.length>0){var n=$(a).find("keyProduct").text(),o=$(a).find("productName").text(),r=$(a).find("productImage").text(),d=$(a).find("productPrice").text(),c=parseInt($(a).find("promotionStarted").text()),l="",p="";if(s+='<div class="columns">',s+='<div class="product-content">',s+='<div class="product-box">',s+='<img src="'+r+'">',s+="<h3>"+o+"</h3>",s+='<ul class="no-bullet">',s+="<li>Standard Price:",s+='<span><strong class="price">USD '+d+"</strong> <strong>/box</strong></span>",s+="</li>",0==c)$(a).find("tier").length>0&&($(a).find("tier").each(function(){var t=$(this).find("unitQuantityMax").text(),e=$(this).find("unitQuantityMin").text(),a=$(this).find("unitPrice").text(),s=100-100*parseFloat(a)/parseFloat(d);l+='<span class="discounts">'+e+"-"+t+' boxes for <strong class="price">USD '+a+"</strong> <strong>/box</strong></span>",p+='<span class="discountsAm"><strong>'+s.toFixed(2)+"% off</strong></span><br/>"}),s+='<li style="height: 95px;">Discount Price',s+=l,s+="</li>",s+='<li style="height: 95px;">Discount Amount',s+=p,s+="</li>"),s+="</ul>",s+="</div>",$(a).find("aggregation").length>0?(s+='<span id="info">',$(a).find("aggregation").each(function(){var t=$(this).find("keyAggregated").text(),e=$(this).find("quantityAggregated").text();s+="<h1>Congratulations! You aggregated "+e+" boxes <small>Would you like to run a promotion?</small></h1>",s+='<div class="button-group">',s+='<button type="button" class="button success" data-open="add-time-restrictions" type="button" class="button login" aria-controls="add-time-restrictions" aria-haspopup="true" tabindex="0" onclick="preparePromotion('+t+", "+n+')">YES</button>',s+='<button type="button" class="button alert">NO</button>',s+="</div>"}),s+="</span>"):s+="<h1>Aggregating...</h1>",$("#deals").html(s);else{var g,u=0,v=0,f=void 0,h=0;$(a).find("aggregation").length>0&&$(a).find("aggregation").each(function(){u=parseInt($(this).find("numberOfOffers").text()),v=parseInt($(this).find("numberAccepted").text()),f=$(this).find("timeOfferEnds").text(),g=parseInt($(this).find("promotionStatus").text()),h=parseInt($(this).find("quantityAggregated").text())}),countDown(f,status),0==g?(s+='<div class="columns table deal-table">',s+='<div class="deal-box category-active">',s+='<div class="offer">',s+='<img src="'+r+'" style="width: 120px;" />',s+='<div class="deals">',s+="<h1>Shoes Category</h1>",s+='<div class="current-deals">',s+="Promotion Tier",s+="<span>Dollar</span>",s+="</div>",s+='<div class="price">',s+="30 - 50 boxes for <span>USD 140</span> / box",s+="</div>",s+="</div>",s+='<div class="time">',s+="<h2>Time Remaining</h2>",s+='<div class="time-box"></div>',s+="</div>",s+="</div>",s+='<div class="completion">',s+="<h4>Completion</h4>",s+='<div class="progress" role="progressbar" tabindex="0" aria-valuenow="'+v/u*100+'" aria-valuemin="0" aria-valuemax="100">',s+='<div class="progress-meter" style="width:'+v/u*100+'%;"></div>',s+="</div>",s+='<div class="progress-step">',s+=v+" / "+u,s+="</div>",s+="</div>",s+="</div>"):1==g?(s+='<div class="deal-box category-active">',s+='<div class="offer deal"> <img src="'+r+'">',s+='<div class="deals">',s+="<h1>Shoes Category</h1>",s+='<div class="deals-status"> <span class="icon-deals-check"></span> <span>Deal Completed</span> </div>',s+='<div class="current-deals"> Promotion Tier <span>Dollar</span> </div>',s+='<div class="price"> 30 - 50 boxes for <span>USD 140</span> / box </div>',s+='<div class="total"> <span>',s+="<strong>Total Buyers</strong>",s+=v,s+="</span> <span>",s+="<strong>Total Quantity</strong>",s+=h+" boxes",s+="</span> </div>",s+="</div>",s+="</div>",s+="</div>"):2==g&&(s+='<div class="deal-box category-active">',s+='<div class="offer deal"> <img src="'+r+'">',s+='<div class="deals">',s+="<h1>Shoes Category</h1>",s+='<div class="deals-status"> <span class="icon-deals-cancel"></span> <span>Promotion Cancelled</span> </div>',s+='<div class="current-deals"> Promotion Tier <span>Dollar</span> </div>',s+='<div class="price"> 30 - 50 boxes for <span>USD 140</span> / box </div>',s+='<div class="total"> <span>',s+="<strong>Total Buyers</strong>",s+=v,s+="</span> <span>",s+="<strong>Total Quantity</strong>",s+=h+" boxes",s+="</span> </div>",s+="</div>",s+="</div>",s+="</div>"),$(a).find("buyers").length>0&&(s+="<table>",s+="<thead>",s+="<tr>",s+="<td>BUYER</td>",s+="<td>QUANTITY</td>",s+="<td>LOCATION</td>",s+="</tr>",s+="</thead>",s+="<tbody>",$(a).find("buyers").find("buyer").each(function(){var t=$(this).find("name").text(),e=$(this).find("quantity").text(),a=$(this).find("location").text();$(this).find("image").text();s+="<tr>",s+='<td><div class="brand nike gap"></div>'+t+"</td>",s+="<td>"+e+"</td>",s+="<td>"+a+"</td>",s+="</tr>"}),s+="</tbody>",s+="</table>"),s+="</div>",$("#deals").html(s)}}}},"xml")}function countDown(t,e){$(".deal-table .deal-box.category-active .offer .time .time-box, .main-section.full-height .tile-grid .tile-box .bottom-box .time-box, .main-section.full-height .tile-grid .info .completion .time-box").countdown(t).on("update.countdown",function(t){var e="<span><em>%d</em>days</span> <span><em>%H</em>hours</span> <span><em>%M</em>min</span> <span><em>%S</em>sec</span>";$(this).html(t.strftime(e))}).on("finish.countdown",function(t){$(this).html("This offer has expired!")})}function preparePromotion(t,e){$("#promoKeyAgg").val(t),$("#promoKeyProduct").val(e)}function startPromotion(t){var e=10;t&&(e=parseInt($("#daysPromotion").val())),isNaN(e)&&(e=10);var a=$("#promoKeyAgg").val(),s=$("#promoKeyProduct").val();$.post("orders_processing.php",{action:"startPromotion",keyAgg:a,daysPromo:e},function(t){console.log(t),showProductDeal(s)},"xml")}function showOrders(t,e){console.log(t),$.post("get_orders.php",{orderKey:t,typeOrder:e},function(a){var s=$(a).find("error").text();if(s.length>0)alert(s);else{var i=$(a).find("orders"),n="";i.length>0&&$(i).find("order").each(function(){var s=($(this).find("from").text(),$(this).find("keyAgregated").text()),i=$(this).find("keyProductOrder").text(),o=$(this).find("buyer").text(),r=$(this).find("name").text(),d=parseInt($(this).find("keyProduct").text()),c=$(this).find("description").text(),l=$(this).find("image").text(),p=$(this).find("units").text(),u=$(this).find("category").text(),v=$(this).find("quantity").text(),f=$(this).find("rate").text(),g=parseInt($(this).find("agregated").text()),h=parseInt($(this).find("maxQuantity").text()),m=$(this).find("status").text(),b=h>g?100*g/h:100,x=$(this).find("unitPrice").text(),y=$(this).find("productPrice").text(),w=100-100*parseFloat(x)/parseFloat(y),x=$(this).find("unitPrice").text(),P=$(this).find("numberOfOffers").text(),D=$(this).find("numberAccepted").text(),k=$(this).find("shippingID").text();console.log(m),$(this).find("tiers").length>0&&(n+='<div class="columns" id="discountTier_'+d+'" style="display:none;position:absolute;z-index:3;">',n+='<div class="tile-box info" data-equalizer-watch="box" data-closable>',n+='<button class="close-button" type="button" data-close><span aria-hidden="true">&times;</span></button>',n+="<h3>Discount Tier Info</h3>",n+='<dl class="discount">',$(this).find("tiers").find("tier").each(function(){var t=$(this).find("unitQuantityMax").text(),e=$(this).find("unitQuantityMin").text(),a=$(this).find("unitPriceTier").text();n+="<dd>"+e+" - "+t+" boxes for <strong><span>USD "+a+"</span> /"+p+"</strong></dd>"}),n+="</dl>",n+="</div>",n+="</div>"),"1"==m?(n+='<div class="columns">',n+='<div class="tile-box" data-equalizer-watch="box">',n+='<button class="edit-button" type="button"><i class="fa fa-pencil" aria-hidden="true"></i></button>',n+='<button class="archive-button" type="button"><span data-tooltip class="has-tip top" data-click-open="true" data-disable-hover="false" title="View Discounts Tier" onclick="showTierForProduct('+d+')"><i class="fa fa-archive" aria-hidden="true"></i></span></button>',n+='<img class="float-center" src="'+l+'">',n+="<h3>"+r+"</h3>",n+="<dl>",n+="<dd><strong>Category:</strong> "+u+"</dd>",n+="<dd><strong>Price:</strong> USD "+f+"/"+p+" <span><strong>Qty:</strong> "+v+" "+p+"</span></dd>",n+="</dl>",n+="<p>"+c+"</p>",d>0?(n+='<div class="progress box" role="progressbar" tabindex="0" aria-valuenow="'+b+'" aria-valuemin="0" aria-valuemax="100">',n+='<div class="progress-meter" style="width:'+b+'%;"></div>'):(n+='<div class="progress box" role="progressbar" tabindex="0" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">',n+='<div class="progress-meter progress-meter-no-key" ></div>'),n+="</div>",n+='<div class="text-center">Aggregated so far: <strong>'+g+" "+p+"</strong></div>",n+="</div>",n+="</div>"):"2"==m?(n+='<div class="columns">',n+='<div class="tile-box active" data-equalizer-watch="box">',n+='<button class="edit-button" type="button"><i class="fa fa-pencil" aria-hidden="true"></i></button>',n+='<img class="float-center" src="'+l+'">',n+="<h3>"+r+"</h3>",n+="<dl>",n+="<dd><strong>Category:</strong> "+u+"</dd>",n+="<dd><strong>Price:</strong> USD "+x+"/box <span><strong>Qty:</strong> "+g+" "+p+"</span></dd>",n+="</dl>",n+='<div class="bottom-box">',n+="<h2>You’ve got offer</h2>",n+='<div class="save">',n+="<strong>"+w+"% off</strong> per box",n+="<span>YOU SAVE USD "+(y-x)+" /box</span>",n+="</div>",n+='<div class="expanded button-group">',n+='<button type="button" class="button accept" onclick="acceptOrder('+i+", "+s+", '"+e+'\')" id="acceptOrder_'+i+'">Accept</button>',n+='<button type="button" class="button hollow" onclick="declineOrder()">Reject</button>',n+="</div>",n+="</div>",n+="</div>",n+="</div>"):"3"==m?(n+='<div class="columns">',n+='<div class="tile-box" data-equalizer-watch="box">',n+='<button class="edit-button" type="button"><i class="fa fa-pencil" aria-hidden="true"></i></button>',n+='<button class="trash-button" type="button"><span data-tooltip class="has-tip top" data-click-open="true" data-disable-hover="false" title="Leave Discount"><i class="fa fa-trash" aria-hidden="true"></i></span></button>',n+='<img class="float-center" src="'+l+'">',n+="<h3>"+r+"</h3>",n+="<dl>",n+="<dd><strong>Category:</strong> "+u+"</dd>",n+="<dd><strong>Price:</strong> USD "+x+"/box <span><strong>Qty:</strong> "+g+" "+p+"</span></dd>",n+="</dl>",n+='<div class="bottom-box">',n+='<div class="completion">',n+="<strong>Completion</strong>",n+='<div class="progress" role="progressbar" tabindex="0" aria-valuenow="'+D/P*100+'" aria-valuemin="0" aria-valuemax="100">',n+='<div class="progress-meter" style="width:'+D/P*100+'%;"></div>',n+="</div>",n+='<div class="progress-step">',n+=""+D+" / "+P,n+="</div>",n+="</div>",n+='<div class="time-box"></div>',n+='<div class="save">',n+="Discount Price: <strong>USD "+x+" /box</strong>",n+="<span>YOU SAVE USD "+(y-x)+" /box</span>",n+="</div>",n+="</div>",n+="</div>",n+="</div>"):"4"==m?(n+='<div class="columns">',n+='<div class="tile-box active" data-equalizer-watch="box">',n+='<img class="float-center" src="'+l+'">',n+="<h3>"+r+"</h3>",n+="<dl>",n+="<dd><strong>Category:</strong> "+u+"</dd>",n+="<dd><strong>Price:</strong> USD "+x+"/box <span><strong>Qty:</strong> "+g+" "+p+"</span></dd>",n+="</dl>",n+='<div class="bottom-box">',n+="<h2>You’ve got offer</h2>",n+='<div class="save">',n+="<strong>"+w+"% off</strong> per box",n+="<span>YOU SAVE USD "+(y-x)+" /box</span>",n+="</div>",n+='<button type="button" class="button expanded" onclick="confirmShippingInfo('+o+", "+i+')">Confirm Shipping Info</button>',n+="</div>",n+="</div>",n+="</div>"):"5"==m?(n+='<div class="columns">',n+='<div class="tile-box active" data-equalizer-watch="box">',n+='<img class="float-center" src="'+l+'">',n+="<h3>"+r+"</h3>",n+="<dl>",n+="<dd><strong>Category:</strong> "+u+"</dd>",n+="<dd><strong>Price:</strong> USD "+x+"/box <span><strong>Qty:</strong> "+g+" "+p+"</span></dd>",n+="</dl>",n+="<p>"+c+"</p>",n+='<div class="bottom-box note" data-closable>',n+="Time is up, the quantity does not meet the target. The deal is cancelled. You will not be charged.",n+='<button class="close-button" type="button" data-close>',n+='<span aria-hidden="true">&times;</span>',n+="</button>",n+="</div>",n+="</div>",n+="</div>"):"6"==m?(n+='<div class="columns">',n+='<div class="tile-box" data-equalizer-watch="box">',n+='<img class="float-center" src="'+l+'">',n+="<h3>"+r+"</h3>",n+="<dl>",n+="<dd><strong>Category:</strong> "+u+"</dd>",n+="<dd><strong>Price:</strong> USD "+x+"/box <span><strong>Qty:</strong> "+g+" "+p+"</span></dd>",n+="</dl>",n+='<div class="bottom-box">',n+='<div class="shipping">',n+="<strong>Shipping</strong>",n+='<div class="tracking-id">Tracking ID: <span>'+k+'</span> - via <span class="icon-fedex"></span></div>',n+="</div>",n+='<div class="save">',n+="Discount Price: <strong>USD "+w+" /box</strong>",n+="<span>YOU SAVE USD "+(y-x)+" /box</span>",n+="</div>",n+='<button type="button" class="button expanded" onclick="confirmDelivery('+t+')">Confirm Delivery</button>',n+="</div>",n+="</div>",n+="</div>"):"7"==m?(n+='<div class="columns">',n+='<div class="tile-box select" data-equalizer-watch="box">',n+='<div class="cancel-button">',n+="● ● ●",n+='<div class="dropdown">',n+='<button type="button" onclick="requestReturn()">Request Return</button>',n+="</div>",n+="</div>",n+='<img class="float-center" src="'+l+'">',n+="<h3>"+r+"</h3>",n+="<dl>",n+="<dd><strong>Category:</strong> "+u+"</dd>",n+="<dd><strong>Price:</strong> USD "+x+"/box <span><strong>Qty:</strong> "+g+" "+p+"</span></dd>",n+="</dl>",n+='<div class="bottom-box">',n+='<div class="shipping">',n+='<span class="icon-received"></span><strong>Items Received</strong>',n+='<div class="tracking-id">Tracking ID: <span>984746553</span> - via <span class="icon-fedex"></span></div>',n+="</div>",n+='<div class="save">',n+="Discount Price: <strong>USD "+w+" /box</strong>",n+="<span>YOU SAVE USD "+(y-x)+" /box</span>",n+="</div>",n+="</div>",n+="</div>",n+="</div>"):"8"==m?(n+='<div class="columns">',n+='<div class="tile-box" data-equalizer-watch="box">',n+='<img class="float-center" src="'+l+'">',n+="<h3>"+r+"</h3>",n+="<dl>",n+="<dd><strong>Category:</strong> "+u+"</dd>",n+="<dd><strong>Price:</strong> USD "+x+"/box <span><strong>Qty:</strong> "+g+" "+p+"</span></dd>",n+="</dl>",n+='<div class="bottom-box">',n+='<div class="shipping">',n+='<span class="icon-transit"></span></span><strong>Pending Return Request</strong>',n+='<div class="tracking-id">Tracking ID: <span>984746553</span> - via <span class="icon-fedex"></span></div>',n+="</div>",n+='<div class="save">',n+="Discount Price: <strong>USD "+w+" /box</strong>",n+="<span>YOU SAVE USD "+(y-x)+" /box</span>",n+="</div>",n+="</div>",n+="</div>",n+="</div>"):"9"==m?(n+='<div class="columns">',n+='<div class="tile-box" data-equalizer-watch="box">',n+='<img class="float-center" src="'+l+'">',n+="<h3>"+r+"</h3>",n+="<dl>",n+="<dd><strong>Category:</strong> "+u+"</dd>",n+="<dd><strong>Price:</strong> USD "+x+"/box <span><strong>Qty:</strong> "+g+" "+p+"</span></dd>",n+="</dl>",n+='<div class="bottom-box">',n+='<div class="shipping">',n+='<span class="icon-refund-approved"></span><strong>Refund Approved</strong>',n+='<div class="tracking-id">Twill be sent in 2-3 days</div>',n+="</div>",n+='<div class="save refund">',n+="Refund Amount: <strong>USD 12,350</strong>",n+="<span>stocking fee 3%</span>",n+="</div>",n+="</div>",n+="</div>",n+="</div>"):"10"==m&&(n+='<div class="columns">',n+='<div class="tile-box" data-equalizer-watch="box">',n+='<img class="float-center" src="'+l+'">',n+="<h3>"+r+"</h3>",n+="<dl>",n+="<dd><strong>Category:</strong> "+u+"</dd>",n+="<dd><strong>Price:</strong> USD "+x+"/box <span><strong>Qty:</strong> "+g+" "+p+"</span></dd>",n+="</dl>",n+='<div class="bottom-box">',n+='<div class="shipping">',n+='<span class="icon-not-received"></span><strong>Refund Rejected</strong>',n+='<div class="tracking-id">Please contact the seller</div>',n+="</div>",n+='<div class="save">',n+='<div class="brand nike"></div>',n+="<dl>",n+="<dt>Daiwa Shoes</dt>",n+="<dd>daiwashoes@gmail.com</dd>",n+="<dd>+62983847910</dd>",n+="</dl>",n+="</div>",n+="</div>",n+="</div>",n+="</div>")}),$("#showOrders").html(n)}},"xml")}function acceptOrder(t,e,a){var s=$("#acceptOrder_"+t).closest(".tile-box");MotionUI.animateOut(s,"hinge-out-from-right",function(){var i="";i+='<div class="columns" id="paymentInfo">',i+='<div class="tile-box active" data-equalizer-watch="box">',i+='<button class="close-button" type="button" data-close><span aria-hidden="true">&times;</span></button>',i+="<h4>Please confirm your payment info</h4>",i+="<dl>",i+="<dt>Credit Card</dt>",i+="<dd><strong>CC Number:</strong> 475-xxx-xxx-xxx-098</dd>",i+="<dd><strong>Expiry Date:</strong> January 2020</dd>",i+="</dl>",i+='<div class="bottom-box">',i+='<div class="button-group">',i+='<button type="button" style="width: 100%;" class="button expanded" onclick="chosePayment('+t+", "+e+", '"+a+"')\">",i+="Payment info is correct",i+="</button>",i+='<button type="button" style="width: 100%;" class="button expanded hollow" onclick="changePayment('+t+')">',i+="I want to change my payment info",i+="</button>",i+="</div>",i+="</div>",i+="</div>",i+="</div>",s.parent().html(i),new Foundation.Equalizer($("#equalizer")).applyHeight(),MotionUI.animateIn("#paymentInfo","hinge-in-from-left")})}function chosePayment(t,e,a){var s=new FormData;s.append("keyProductOrder",t),s.append("keyAgregated",e),s.append("typeOrder",a),s.append("action","payed"),$.ajax({url:"orders_processing.php",dataType:"xml",cache:!1,contentType:!1,processData:!1,data:s,type:"post",success:function(t){$(t).find("order").text(),$(t).find("order").text();showOrders(44,a)}})}function showTierForProduct(t){$("#discountTier_"+t).fadeIn()}function confirmShippingInfo(t,e){var a=new FormData;a.append("keyBuyer",t),a.append("keyProductOrder",e),a.append("action","getBuyer"),$.ajax({url:"orders_processing.php",dataType:"xml",cache:!1,contentType:!1,processData:!1,data:a,type:"post",success:function(t){var a=$(t).find("name").text(),s=$(t).find("address").text(),i=$(t).find("city").text(),n=$(t).find("state").text(),o=$(t).find("zip").text();result+='<div class="columns">',result+='<div class="tile-box info active" data-equalizer-watch="box" data-closable>',result+='<button class="close-button" type="button" data-close><span aria-hidden="true">&times;</span></button>',result+="<h4>Please confirm your shipping info</h4>",result+="<dl>",result+="<dt>"+a+"</dt>",result+="<dd><strong>Street Address:</strong> "+s+"</dd>",result+="<dd><strong>City:</strong> "+i+"</dd>",result+="<dd><strong>State:</strong> "+n+"</dd>",result+="<dd><strong>Country:</strong> United States of America</dd>",result+="<dd><strong>Postal Code:</strong> "+o+"</dd>",result+="</dl>",result+='<button type="button" class="button expanded" onclick="confirmShipping('+e+')">Shipping info is correct</button>',result+="</div>",result+="</div>"}})}var numberOfProducts=0;$(document).ready(function(){showProduct(),$("#category").on("change",function(){showProduct()}),$("#search-bar").on("keydown",function(){showProduct()}),$("#price").on("change",function(){showProduct()}),$("#confirmProducts").click(function(){var t=$(".productKey"),e=[],a=[],s=[];t.each(function(){var t=$(this).val();e.push(parseInt(t)),a.push(parseInt($("#price_"+t).val())),s.push(parseInt($("#quantity_"+t).val()))}),$.post("add_to_order.php",{action:"add_to_order",keyProduct:e,productPrice:a,productQuantity:s},function(t){console.log(t);var e=$(t).find("error").text();if(e.length>0)alert("You must chose some product");else{var a=$(t).find("result").text();window.location.href=a}},"xml")}),$("#loginSubmit").click(function(){var t=$("#username").val(),e=$("#password").val();$.post("login.php",{username:t,password:e},function(t){console.log(t);var e=$(t).find("userType").text();console.log(e),e.length<0?alert("Invalid login!"):"1"==e||"1"==e?window.location.href="my-requests.php":"2"==e&&(window.location.href="active_deals.php")},"xml")}),$(".red").first().click(),$(".requests").first().click(),$("#createProduct").click(function(){var t=$("#productFileUpload").prop("files")[0],e=$("#productName").val(),a=$("#productDescription").val(),s=$("#productPrice").val(),i=$("#productCategory").find(":selected").val(),n=$("#productUnit").find(":selected").val(),o=new FormData;o.append("file",t),o.append("productName",e),o.append("productDescription",a),o.append("productPrice",s),o.append("productCategory",i),o.append("productUnit",n),o.append("action","newProduct"),$.ajax({url:"products.php",dataType:"xml",cache:!1,contentType:!1,processData:!1,data:o,type:"post",success:function(t){var e=$(t).find("error").text();if(e.length>0)return void alert(e);var a=$(t).find("keyProduct").text();$(".close-button").click(),$("#newProduct").find("input[type=text], input[type=number], textarea").val(""),$("#newProduct").find("input[type=file]").val(""),numberOfProducts++,$("#itemsNumber").html(numberOfProducts+"items"),showProductOnAddProduct(a)}})}),$("#submitTier").click(function(){var t=$(".maxQua"),e=$(".amount"),a=[],s=[];t.each(function(){a.push(parseInt($(this).val()))}),e.each(function(){s.push(parseInt($(this).val()))});var i=$(".product:checked").val(),n=$("input[name=view]").val(),o=new FormData;o.append("action","addToTierProduct"),o.append("keyProduct",i),o.append("quantity",a),o.append("amount",s),o.append("type",n),$.ajax({url:"products.php",dataType:"xml",cache:!1,contentType:!1,processData:!1,data:o,type:"post",success:function(t){console.log(t)},error:function(t,e,a){alert(t.status),alert(a)}})}),$("#finishUserCreate").click(function(){var t=new FormData,e=$("#firstStep").find("input").filter(function(){return""===this.value});if(e.length)alert("All fields must be entered.");else{var a=$("#first").val(),s=$("#last").val(),i=$("#user").val(),n=$("#email").val(),o=$("#password").val(),r=$("#passwordConfirm").val(),d=$("#profilePicture").prop("files")[0],c=$("#legalBussinesName").val(),l=$("#industry").val(),p=$("#businessAddress").val(),u=$("#taxId").val(),v=$("#city").val(),f=$("#state").val(),g=$("#zip").val();if(o!=r)return alert("Passwords must match."),!1;var t=new FormData;t.append("action","add_user"),t.append("firstName",a),t.append("lastName",s),t.append("userName",i),t.append("email",n),t.append("password",o),t.append("file",d),t.append("legalBussinesName",c),t.append("industry",l),t.append("businessAddress",p),t.append("taxId",u),t.append("city",v),t.append("state",f),t.append("zip",g),$.ajax({url:"add_user.php",dataType:"xml",cache:!1,contentType:!1,processData:!1,data:t,type:"post",success:function(t){var e=$(t).find("error").text();if(e.length>0)return void alert(e);var a=$(t).find("info").text();window.location.href=a},error:function(t,e,a){alert(t.status),alert(a)}})}})});var documentHeight=$(window).height()-65;$(".main-section aside").height(documentHeight);var windowHeight=$(window).innerHeight()-100;$(".main-section .side-grid").innerHeight(windowHeight),$(window).resize(function(){var t=$(window).height()-65;$(".main-section aside").height(t);var e=$(window).innerHeight()-100;$(".main-section .side-grid").innerHeight(e)}),$(".main-section aside .toggle-side").click(function(){$(".main-section aside").toggleClass("open").addClass("hidden"),$(".main-section .side-grid").toggleClass("open"),setTimeout(function(){$(".main-section aside").removeClass("hidden")},350)}),$(".active-deals").slick({infinite:!1,swipe:!1,slidesToShow:5,slidesToScroll:1}),$('.floating-box .login input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_minimal-purple"}),$(".cart-box .flatpickr").flatpickr({enableTime:!0}),$(".cart-box .item-list").mCustomScrollbar({theme:"minimal-dark"}),$(".cart-box .item-list .item .remove").click(function(){$(this).parent().remove()});